<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>BigD - {% block title %}{% endblock %}</title>
        <meta name="description" content="description">
        <meta name="author" content="DevOOPS">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link href="{{asset('bundles/theme/devoops/plugins/bootstrap/bootstrap.css')}}" rel="stylesheet">
        <link href="{{asset('bundles/theme/devoops/plugins/jquery-ui/jquery-ui.min.css')}}" rel="stylesheet">
        <link href="http://maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
        <link href='http://fonts.googleapis.com/css?family=Righteous' rel='stylesheet' type='text/css'>
        <link href="{{asset('bundles/theme/devoops/plugins/fancybox/jquery.fancybox.css')}}" rel="stylesheet">
        <link href="{{asset('bundles/theme/devoops/plugins/fullcalendar/fullcalendar.css')}}" rel="stylesheet">
        <link href="{{asset('bundles/theme/devoops/plugins/xcharts/xcharts.min.css')}}" rel="stylesheet">
        <link href="{{asset('bundles/theme/devoops/plugins/select2/select2.css')}}" rel="stylesheet">
        <link href="{{asset('bundles/theme/devoops/plugins/justified-gallery/justifiedGallery.css')}}" rel="stylesheet">
        {#        <link href="{{asset('bundles/theme/devoops/css/style_v1.css')}}" rel="stylesheet">#}
        <link href="{{asset('bundles/theme/css/style_v1_custom.css')}}" rel="stylesheet">
        <link href="{{asset('bundles/theme/devoops/plugins/chartist/chartist.min.css')}}" rel="stylesheet">
        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
                        <script src="http://getbootstrap.com/docs-assets/js/html5shiv.js"></script>
                        <script src="http://getbootstrap.com/docs-assets/js/respond.min.js"></script>
        <![endif]-->
        {% if form is defined %}
            {% form_theme form 'ThemeBundle:Default:forms_rows.html.twig' %}
        {% endif %}
    </head>
    <body>
        <!--Start Header-->
        <div id="screensaver">
            <canvas id="canvas"></canvas>
            <i class="fa fa-lock" id="screen_unlock"></i>
        </div>
        <div id="modalbox">
            <div class="devoops-modal">
                <div class="devoops-modal-header">
                    <div class="modal-header-name">
                        <span>Basic table</span>
                    </div>
                    <div class="box-icons">
                        <a class="close-link">
                            <i class="fa fa-times"></i>
                        </a>
                    </div>
                </div>
                <div class="devoops-modal-inner">
                </div>
                <div class="devoops-modal-bottom">
                </div>
            </div>
        </div>
        <header class="navbar">
            <div class="container-fluid expanded-panel">
                <div class="row">
                    <div id="logo" class="col-xs-12 col-sm-2">
                        <a href="#">BigD</a>
                    </div>
                    <div id="top-panel" class="col-xs-12 col-sm-10">
                        <div class="row">
                            <div class="col-xs-8 col-sm-4">
                                {#<div id="search">
                                    <input type="text" placeholder="search"/>
                                    <i class="fa fa-search"></i>
                                </div>#}
                            </div>
                            <div class="col-xs-4 col-sm-8 top-panel-right">

                                <ul class="nav navbar-nav pull-right panel-menu">

                                    <li class="dropdown">
                                        <a href="#" class="dropdown-toggle account" data-toggle="dropdown">
                                            <div class="avatar">
                                                <img src="{{asset('bundles/theme/devoops/img/avatar.jpg')}}" class="img-circle" alt="avatar" />
                                            </div>
                                            <i class="fa fa-angle-down pull-right"></i>
                                            <div class="user-mini pull-right">
                                                <span class="welcome">Bienvenido,</span>
                                                <span>{{app.user.username}}</span>
                                            </div>
                                        </a>
                                        <ul class="dropdown-menu">
                                            <li>
                                                <a href="#">
                                                    <i class="fa fa-user"></i>
                                                    <span>Perfil</span>
                                                </a>
                                            </li>

                                            <li>
                                                <a href="{{ path('fos_user_security_logout') }}">
                                                    <i class="fa fa-power-off"></i>
                                                    <span>{{ 'layout.logout'|trans({}, 'FOSUserBundle') }}</span>
                                                </a>
                                            </li>
                                        </ul>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </header>
        <!--End Header-->
        <!--Start Container-->
        <div id="main" class="container-fluid">
            <div class="row">
                <div id="sidebar-left" class="col-xs-2 col-sm-2">
                    {% include 'ThemeBundle:Default:menuLateral.html.twig' %}
                </div>
                <!--Start Content-->
                <div id="content" class="col-xs-12 col-sm-10">
                    {#<div id="about">
                        <div class="about-inner">
                            <h4 class="page-header">Open-source admin theme for you</h4>
                            <p>DevOOPS team</p>
                            <p>Homepage - <a href="http://devoops.me" target="_blank">http://devoops.me</a></p>
                            <p>Email - <a href="mailto:devoopsme@gmail.com">devoopsme@gmail.com</a></p>
                            <p>Twitter - <a href="http://twitter.com/devoopsme" target="_blank">http://twitter.com/devoopsme</a></p>
                            <p>Donate - BTC 123Ci1ZFK5V7gyLsyVU36yPNWSB5TDqKn3</p>
                        </div>
                    </div>#}
                    {#<div class="preloader">
                        <img src="img/devoops_getdata.gif" class="devoops-getdata" alt="preloader"/>
                    </div>#}
                    <div id="ajax-content">
                        <div class="row">
                            <div id="breadcrumb" class="col-xs-12">
                                <a class="show-sidebar" href="#">
                                    <i class="fa fa-bars"></i>
                                </a>

                            </div>



                        </div>
                        {% for flashMessage in app.session.flashbag.get('success') %}
                            <div class="alert alert-dismissable alert-success">
                                <i class="fa fa-check"></i>
                                <button type="button" class="close" data-dismiss="alert">×</button>
                                {{ flashMessage }}
                            </div>

                        {% endfor %}
                        {% for flashMessage in app.session.flashbag.get('error') %}
                            <div class="alert alert-dismissable alert-danger">
                                <i class="fa fa-ban"></i>
                                <button type="button" class="close" data-dismiss="alert">×</button>
                                {{ flashMessage }}
                            </div>

                        {% endfor %}

                        {% for flashMessage in app.session.flashbag.get('warning') %}
                            <div class="alert alert-dismissable alert-warning">
                                <i class="fa fa-warning"></i>
                                <button type="button" class="close" data-dismiss="alert">×</button>
                                {{ flashMessage }}
                            </div>

                        {% endfor %}
                        {% block body %}

                        {% endblock %}
                    </div>
                    <!--End Content-->
                </div>
            </div>
            <!--End Container-->
            <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
            <!--<script src="http://code.jquery.com/jquery.js"></script>-->
            <script src="{{asset('bundles/theme/devoops/plugins/jquery/jquery.min.js')}}"></script>
            <script src="{{asset('bundles/theme/devoops/plugins/jquery-ui/jquery-ui.min.js')}}"></script>
            <!-- Include all compiled plugins (below), or include individual files as needed -->
            <script src="{{asset('bundles/theme/devoops/plugins/bootstrap/bootstrap.min.js')}}"></script>
            <script src="{{asset('bundles/theme/devoops/plugins/justified-gallery/jquery.justifiedGallery.min.js')}}"></script>
            <script src="{{asset('bundles/theme/devoops/plugins/tinymce/tinymce.min.js')}}"></script>
            <script src="{{asset('bundles/theme/devoops/plugins/tinymce/jquery.tinymce.min.js')}}"></script>
            <script src="{{asset('bundles/theme/devoops/plugins/datatables/jquery.dataTables.js')}}"></script>
            <script src="{{asset('bundles/theme/devoops/plugins/datatables/dataTables.bootstrap.js')}}"></script>
            <script src="{{asset('bundles/theme/js/BigD.js')}}" type="text/javascript"></script>
            {% block javascripts %}
                
            {% endblock javascripts %}

            <!-- All functions for this theme + document.ready processing -->
            {#            <script src="{{asset('bundles/theme/devoops/js/devoops_custom.js')}}"></script>#}

            {#            {% include 'ThemeBundle:Default:devoops.js.twig' %}#}

            <script>
                //
                //  Helper for correct size of Messages page
                //
                function MessagesMenuWidth() {
                    var W = window.innerWidth;
                    var W_menu = $('#sidebar-left').outerWidth();
                    var w_messages = (W - W_menu) * 16.666666666666664 / 100;
                    $('#messages-menu').width(w_messages);
                }

                $('.datatable-1').dataTable({
                    "searching": false,
                    "paging": false,
                    "aaSorting": [[0, "asc"]],
                    "lengthMenu": false,
                    "oLanguage": {
                        "sEmptyTable": "Sin Resultados",
                        "sInfo": "",
                        "sInfoEmpty": ""
                    }
                });

                $(document).ready(function () {


                    //Datepicker
                    $(".datepicker").datepicker({
                        onSelect: function (dateText, inst) {
                            //validaFecha(this);
                        },{#                        showOn: "button",#}{#                        buttonImage: "{{ asset('bundles/theme/images/iconos/calendar.png') }}",#}
                {#                        buttonImageOnly: true,#}
                            dateFormat: "dd-mm-yy",
                            dayNamesMin: ["Do", "Lu", "Ma", "Mi", "Ju", "Vi", "Sa"],
                            monthNames: ["Enero", "Febrero", "Marzo", "Abril", "Mayo", "Junio", "Julio", "Agosto", "Septiembre", "Octubre", "Noviembre", "Diciembre"],
                            monthNamesShort: ["Enero", "Febrero", "Marzo", "Abril", "Mayo", "Junio", "Julio", "Agosto", "Septiembre", "Octubre", "Noviembre", "Diciembre"],{#                        yearRange: "1900:+10Y",#}
                            yearRange: "1900:+10Y",
                            maxDate: "today",
                            changeMonth: true,
                            changeYear: true,
                            showOtherMonths: true,
                            selectOtherMonths: true,
                            nextText: "Siguiente",
                            prevText: "Anterior"
                        });

                        $(".datepicker").datepicker("option", "showAnim", 'slideDown');

                        $('body').on('click', '.show-sidebar', function (e) {
                            e.preventDefault();
                            $('div#main').toggleClass('sidebar-show');
                            setTimeout(MessagesMenuWidth, 250);
                        });

                        $('.main-menu').on('click', 'a', function (e) {
                            var parents = $(this).parents('li');
                            var li = $(this).closest('li.dropdown');
                            var another_items = $('.main-menu li').not(parents);
                            another_items.find('a').removeClass('active');
                            another_items.find('a').removeClass('active-parent');
                            if ($(this).hasClass('dropdown-toggle') || $(this).closest('li').find('ul').length == 0) {

                                $(this).addClass('active-parent');
                                var current = $(this).next();
                                if (current.is(':visible')) {
                                    li.find("ul.dropdown-menu").slideUp('fast');
                                    li.find("ul.dropdown-menu a").removeClass('active')
                                }
                                else {
                                    another_items.find("ul.dropdown-menu").slideUp('fast');
                                    current.slideDown('fast');
                                }
                            }
                            else {
                                if (li.find('a.dropdown-toggle').hasClass('active-parent')) {
                                    var pre = $(this).closest('ul.dropdown-menu');
                                    pre.find("li.dropdown").not($(this).closest('li')).find('ul.dropdown-menu').slideUp('fast');
                                }
                            }
                            if ($(this).attr('href') == '#') {
                                e.preventDefault();
                            }
                        });
                        var height = window.innerHeight - 49;
                        $('#main').css('min-height', height)
                                .on('click', '.expand-link', function (e) {
                                    var body = $('body');
                                    e.preventDefault();
                                    var box = $(this).closest('div.box');
                                    var button = $(this).find('i');
                                    button.toggleClass('fa-expand').toggleClass('fa-compress');
                                    box.toggleClass('expanded');
                                    body.toggleClass('body-expanded');
                                    var timeout = 0;
                                    if (body.hasClass('body-expanded')) {
                                        timeout = 100;
                                    }
                                    setTimeout(function () {
                                        box.toggleClass('expanded-padding');
                                    }, timeout);
                                    setTimeout(function () {
                                        box.resize();
                                        box.find('[id^=map-]').resize();
                                    }, timeout + 50);
                                })
                                .on('click', '.collapse-link', function (e) {
                                    e.preventDefault();
                                    var box = $(this).closest('div.box');
                                    var button = $(this).find('i');
                                    var content = box.find('div.box-content');
                                    content.slideToggle('fast');
                                    button.toggleClass('fa-chevron-up').toggleClass('fa-chevron-down');
                                    setTimeout(function () {
                                        box.resize();
                                        box.find('[id^=map-]').resize();
                                    }, 50);
                                })
                                .on('click', '.close-link', function (e) {
                                    e.preventDefault();
                                    var content = $(this).closest('div.box');
                                    content.remove();
                                });
                        $('#locked-screen').on('click', function (e) {
                            e.preventDefault();
                            $('body').addClass('body-screensaver');
                            $('#screensaver').addClass("show");
                            ScreenSaver();
                        });
                        $('body').on('click', 'a.close-link', function (e) {
                            e.preventDefault();
                            CloseModalBox();
                        });
                        $('#top-panel').on('click', 'a', function (e) {
                            if ($(this).hasClass('ajax-link')) {
                                e.preventDefault();
                                if ($(this).hasClass('add-full')) {
                                    $('#content').addClass('full-content');
                                }
                                else {
                                    $('#content').removeClass('full-content');
                                }
                                var url = $(this).attr('href');
                                window.location.hash = url;
                                LoadAjaxContent(url);
                            }
                        });

                    });
            </script>
    </body>
</html>
